import{r as c,W as S,j as e}from"./app-Dkk80x56.js";import{r as a}from"./index-CAoa_Lfd.js";import{M as g}from"./index-HPKVUewT.js";import z from"./TestimonialsPage-mkVxMvcu.js";import"./Testimonials-BmokzBXu.js";g.setAppElement("#app");function I({landingData:i,onSuccess:x}){const[f,d]=c.useState(!1),[A,j]=c.useState(null),{setData:v,post:_,processing:y}=S(),u=typeof(i==null?void 0:i.section6_testimonials)=="string"?JSON.parse(i.section6_testimonials):i.section6_testimonials,[n,l]=c.useState({section6_testimonials:Array.isArray(u)?u:[{name:"",description:"",image:null}],section:""});c.useEffect(()=>{if(i){const t=typeof i.section6_testimonials=="string"?JSON.parse(i.section6_testimonials):i.section6_testimonials;l({section6_testimonials:Array.isArray(t)?t:[{name:"",description:"",image:null}],section:"testimonials"})}},[i]),c.useEffect(()=>{v({section6_testimonials:n.section6_testimonials,section:"testimonials"})},[n]);const N=()=>{d(!0)},p=()=>{d(!1)},h=(t,s,o)=>{const r=[...n.section6_testimonials];r[t][s]=o,l(m=>({...m,section6_testimonials:r}))},b=(t,s)=>{const o=t.target.files[0];if(o){const r=URL.createObjectURL(o);j({url:r});const m=[...n.section6_testimonials];m[s].image={url:r,file:o},l(k=>({...k,section6_testimonials:m}))}},w=()=>{l(t=>({...t,section6_testimonials:[...t.section6_testimonials,{name:"",description:"",image:null}]}))},C=t=>{const s=[...n.section6_testimonials];s.splice(t,1),l(o=>({...o,section6_testimonials:s}))},T=t=>{t.preventDefault();const s=new FormData;s.append("section6_testimonials",JSON.stringify(n.section6_testimonials)),_("/landing",{data:s,preserveScroll:!0,onFinish:()=>{console.log("Formulario enviado con éxito"),d(!1),window.scrollTo({top:0,behavior:"smooth"}),x("Landing Page actualizada correctamente.")}})};return e.jsx("section",{className:"border p-4",children:e.jsxs("header",{children:[e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Agrega información de Testimonios."}),e.jsx("br",{}),n.section6_testimonials.map((t,s)=>e.jsxs("div",{className:"border p-6 rounded-md mb-4 space-y-2",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:t.name??"",onChange:o=>h(s,"name",o.target.value),className:"mt-1 block w-full border-gray-300 rounded-md"}),e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:"Descripción"}),e.jsx("input",{type:"text",value:t.description??"",onChange:o=>h(s,"description",o.target.value),className:"mt-1 block w-full border-gray-300 rounded-md"}),e.jsxs("div",{className:"mt-4",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:"Agregar imagen"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("input",{type:"file",name:"testimonials_image",id:`testimonials_image_${s}`,className:"hidden",accept:"image/*",onChange:o=>b(o,s)}),e.jsxs(a.Button,{size:"sm",variant:"gradient",className:"rounded-full flex items-center gap-3",onClick:()=>document.getElementById(`testimonials_image_${s}`).click(),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"h-5 w-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z"})}),"Seleccionar imagen"]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(a.Button,{size:"sm",variant:"gradient",color:"red",onClick:()=>C(s),children:"Eliminar sección"})})]},s)),e.jsxs("div",{className:"mt-4 flex space-x-4",children:[e.jsx("div",{className:"mt-6",children:e.jsx(a.Button,{size:"sm",variant:"gradient",onClick:w,children:"Agregar Testimonio"})}),e.jsx("div",{className:"mt-6",children:e.jsx(a.Button,{size:"sm",variant:"gradient",onClick:N,children:"Previsualizar"})})]}),e.jsxs(g,{isOpen:f,onRequestClose:p,contentLabel:"Previsualizar",style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",width:"100%",maxWidth:"1200px",height:"auto",maxHeight:"700px"}},children:[e.jsx("div",{className:"absolute top-2 right-2 z-50",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"mr-3 h-10 w-10 cursor-pointer hover:scale-110 transition-transform duration-200",onClick:p,children:e.jsx("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z",clipRule:"evenodd"})})}),e.jsx("br",{}),e.jsx(z,{landingData:n.section6_testimonials,isPrev:!0}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-4",children:[e.jsx(a.Button,{onClick:p,children:"Cerrar"}),e.jsx(a.Button,{onClick:T,disabled:y,children:"Guardar"})]})]})]})})}export{I as default};
