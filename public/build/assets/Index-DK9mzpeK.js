import{W as S,r as m,j as e,R as k,Y as F}from"./app-Dkk80x56.js";import{r as s}from"./index-CAoa_Lfd.js";import{A as I}from"./AuthenticatedLayout-BGV4sc3p.js";import{I as d}from"./InputError-B4DMRjhS.js";import{F as A,a as T}from"./TrashIcon-CfRVNdQ-.js";import{F as D,a as B}from"./PlusIcon-DqfJkVix.js";const L=({open:u,onClose:c,onSuccess:x,currentStudent:t})=>{const i=!!t,{data:l,setData:o,post:g,reset:f,errors:a,put:j}=S({name:"",f_surname:"",m_surname:"",email:"",gender:"",phone:"",address:"",zip_code:"",city:"",country:""}),[b,h]=m.useState(!1);m.useEffect(()=>{i?o({name:t.name,f_surname:t.f_surname,m_surname:t.m_surname,email:t.user.email,gender:t.gender,phone:t.phone,address:t.address,zip_code:t.zip_code,city:t.city,country:t.country}):f()},[t,i]);const y=r=>{r.preventDefault(),h(!0),i?j(route("students.update",t.id),{...l,onSuccess:()=>{h(!1),x("Estudiante actualizado correctamente."),c()},onError:p=>{console.error(p),h(!1)}}):g(route("students.store"),{onSuccess:()=>{h(!1),f(),x("Estudiante creado correctamente."),c()},onError:p=>{console.error(p),h(!1)}})};return e.jsx(k.Fragment,{children:e.jsxs(s.Drawer,{placement:"right",open:u,onClose:c,className:"p-4",size:500,children:[e.jsxs("div",{className:"flex items-center justify-between px-4 pb-2",children:[e.jsx("h3",{className:"text-lg font-bold",children:i?"Editar Estudiante":"Agregar Nuevo Estudiante"}),e.jsx(s.IconButton,{variant:"text",color:"blue-gray",onClick:c,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"h-5 w-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-4 h-[calc(100vh-100px)] overflow-y-auto",children:e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(s.Input,{id:"name",name:"name",value:l.name,type:"text",size:"lg",label:"Nombre",placeholder:"Nombre",className:"!border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:r=>o("name",r.target.value)}),a.name&&e.jsx(d,{message:a.name,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(s.Input,{id:"f_surname",name:"f_surname",value:l.f_surname,type:"text",size:"lg",label:"A. Paterno",placeholder:"A. Paterno",className:"!border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:r=>o("f_surname",r.target.value)}),a.f_surname&&e.jsx(d,{message:a.f_surname,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(s.Input,{id:"m_surname",name:"m_surname",value:l.m_surname,type:"text",size:"lg",label:"A. Materno",placeholder:"A. Materno",className:"!border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:r=>o("m_surname",r.target.value)}),a.m_surname&&e.jsx(d,{message:a.m_surname,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(s.Input,{id:"email",name:"email",value:l.email,type:"email",size:"lg",label:"Correo Electrónico",placeholder:"ejemplo@correo.com",className:"!border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:r=>o("email",r.target.value)}),a.email&&e.jsx(d,{message:a.email,className:"mt-2"})," "]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700",children:"Género"}),e.jsxs("select",{id:"gender",name:"gender",value:l.gender,onChange:r=>o("gender",r.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-blue-gray-200 focus:border-gray-900 focus:outline-none focus:ring-indigo-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"",children:"Seleccione género"}),e.jsx("option",{value:"Masculino",children:"Masculino"}),e.jsx("option",{value:"Femenino",children:"Femenino"}),e.jsx("option",{value:"Otro",children:"Otro"})]}),a.gender&&e.jsx(d,{message:a.gender,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(s.Input,{id:"phone",name:"phone",value:l.phone,type:"text",size:"lg",label:"Telefono",placeholder:"Telefono",className:"!border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:r=>o("phone",r.target.value)}),a.phone&&e.jsx(d,{message:a.phone,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(s.Input,{id:"address",name:"address",value:l.address,type:"text",size:"lg",label:"Direccion",placeholder:"Direccion",className:"!border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:r=>o("address",r.target.value)}),a.address&&e.jsx(d,{message:a.address,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(s.Input,{id:"zip_code",name:"zip_code",value:l.zip_code,type:"text",size:"lg",label:"CP",placeholder:"CP",className:"!border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:r=>o("zip_code",r.target.value)}),a.zip_code&&e.jsx(d,{message:a.zip_code,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(s.Input,{id:"city",name:"city",value:l.city,type:"text",size:"lg",label:"Ciudad",placeholder:"Ciudad",className:"!border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:r=>o("city",r.target.value)}),a.city&&e.jsx(d,{message:a.city,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(s.Input,{id:"country",name:"country",value:l.country,type:"text",size:"lg",label:"Pais",placeholder:"Pais",className:"!border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:r=>o("country",r.target.value)}),a.country&&e.jsx(d,{message:a.country,className:"mt-2"})]}),e.jsx(s.Button,{type:"submit",color:"blue-gray",fullWidth:!0,disabled:b,children:b?"Enviando...":i?"Actualizar Estudiante":"Crear Estudiante"})]})})]})})},M=({students:u})=>{const[c,x]=m.useState(""),[t,i]=m.useState(u),[l,o]=m.useState(1),[g]=m.useState(5),[f,a]=m.useState(!1),[j,b]=m.useState(null),[h,y]=m.useState(null);m.useEffect(()=>{const n=u.filter(v=>v.name.toLowerCase().includes(c.toLowerCase()));i(n)},[c,u]);const r=l*g,p=r-g,w=t.slice(p,r),N=n=>o(n),_=()=>a(!0),C=()=>{y(null),a(!1)},E=n=>{b(n),setTimeout(()=>b(null),3e3)},z=n=>{y(n),a(!0)};return e.jsxs(e.Fragment,{children:[j&&e.jsx(s.Alert,{color:"green",children:j}),e.jsxs(s.Card,{className:"h-full w-full",children:[e.jsx(s.CardHeader,{floated:!1,shadow:!1,className:"rounded-none",children:e.jsxs("div",{className:"mb-4 flex flex-col justify-between gap-8 md:flex-row md:items-center",children:[e.jsxs("div",{children:[e.jsx(s.Typography,{variant:"h5",color:"blue-gray",children:"Lista de Estudiantes"}),e.jsx(s.Typography,{color:"gray",className:"mt-1 font-normal",children:"Administra tus estudiantes a continuación"})]}),e.jsxs("div",{className:"flex w-full shrink-0 gap-2 md:w-max",children:[e.jsx("div",{className:"w-full md:w-72",children:e.jsx(s.Input,{label:"Buscar nombre",icon:e.jsx(A,{className:"h-5 w-5"}),value:c,onChange:n=>x(n.target.value)})}),e.jsxs(s.Button,{className:"flex items-center gap-3",size:"sm",onClick:_,children:[e.jsx(D,{strokeWidth:2,className:"h-4 w-4"})," Nuevo"]})]})]})}),e.jsx(s.CardBody,{className:"overflow-scroll px-0",children:e.jsxs("table",{className:"w-full min-w-max table-auto text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border-y border-blue-gray-100 bg-blue-gray-50/50 p-4",children:"Nombre"}),e.jsx("th",{className:"border-y border-blue-gray-100 bg-blue-gray-50/50 p-4",children:"Email"}),e.jsx("th",{className:"border-y border-blue-gray-100 bg-blue-gray-50/50 p-4",children:"Genero"}),e.jsx("th",{className:"border-y border-blue-gray-100 bg-blue-gray-50/50 p-4",children:"Telefono"}),e.jsx("th",{className:"border-y border-blue-gray-100 bg-blue-gray-50/50 p-4",children:"Direccion"}),e.jsx("th",{className:"border-y border-blue-gray-100 bg-blue-gray-50/50 p-4",children:"Acciones"})]})}),e.jsx("tbody",{children:w.map((n,v)=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(s.Typography,{className:"font-bold",children:[n.name," ",n.f_surname," ",n.m_surname]})})}),e.jsx("td",{className:"p-4",children:n.user.email}),e.jsx("td",{className:"p-4",children:n.gender}),e.jsx("td",{className:"p-4",children:n.phone}),e.jsxs("td",{className:"p-4",children:[n.address,", ",n.zip_code,", ",n.city,", ",n.country,"  "]}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(s.Tooltip,{content:"Editar",children:e.jsx(s.IconButton,{variant:"text",onClick:()=>z(n),children:e.jsx(B,{className:"h-4 w-4"})})}),e.jsxs("form",{method:"POST",action:route("students.destroy",n.id),onSubmit:P=>{window.confirm(`¿Estás seguro que deseas eliminar a ${n.name}?`)||P.preventDefault()},children:[e.jsx("input",{type:"hidden",name:"_token",value:document.querySelector('meta[name="csrf-token"]').getAttribute("content")}),e.jsx("input",{type:"hidden",name:"_method",value:"DELETE"}),e.jsx(s.Tooltip,{content:"Eliminar",children:e.jsx(s.IconButton,{type:"submit",variant:"text",color:"red",children:e.jsx(T,{className:"h-4 w-4"})})})]})]})})]},n.id))})]})}),e.jsxs(s.CardFooter,{className:"flex items-center justify-between border-t border-blue-gray-50 p-4",children:[e.jsx(s.Button,{variant:"outlined",size:"sm",onClick:()=>N(l-1),disabled:l===1,children:"Anterior"}),e.jsx(s.Button,{variant:"outlined",size:"sm",onClick:()=>N(l+1),disabled:l===Math.ceil(t.length/g),children:"Siguiente"})]})]}),e.jsx(L,{open:f,onClose:C,onSuccess:E,currentStudent:h})]})},O=M;function Y({auth:u,students:c,...x}){var i;const t=(i=x==null?void 0:x.flash)==null?void 0:i.success;return e.jsxs(I,{user:u.user,roles:u.roles,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Estudiantes"}),children:[e.jsx(F,{title:"Students"}),e.jsx("div",{children:t&&e.jsx(s.Alert,{color:"green",children:t})}),e.jsx("div",{className:"mt-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6",children:e.jsx(O,{students:c})})})]})}export{Y as default};
